<?php

/**
 * @file
 * Views implementing europa components.
 */

/**
 * Implements hook_views_api().
 */
function nexteuropa_core_views_views_api() {
  return ['api' => 3.0];
}

/**
 * Implements hook_clear_caches().
 */
function nexteuropa_core_views_flush_caches() {
  $hooks = array();
  foreach (theme_get_registry() as $hook => $data) {
    echo print_r($hook, 1 ) . "\n";
    if (isset($data['variables']) && is_array($data['variables']) && !isset($data['render element'])) {

      $data['variables'] = array_filter($data['variables'], function($value) {
        return !is_array($value);
      });
      $data['variables'] = array_diff(array_keys($data['variables']), array('content_attributes', 'wrapper_attributes', 'title_attributes'));

      if (count($data['variables']) >= 1) {
        $hooks[$hook] = $data;
      }
    }
  }

  ksort($hooks);

  variable_set('nexteuropa_core_views_hooks', $hooks);
}
